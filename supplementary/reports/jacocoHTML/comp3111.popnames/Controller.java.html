<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Controller.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">PopNames3111</a> &gt; <a href="index.source.html" class="el_package">comp3111.popnames</a> &gt; <span class="el_source">Controller.java</span></div><h1>Controller.java</h1><pre class="source lang-java linenums">package comp3111.popnames;

import javafx.fxml.FXML;
import javafx.scene.control.*;
import javafx.scene.control.Alert.AlertType;

/**
 * Controller Class of the Application
 */
<span class="fc" id="L10">public class Controller {</span>

    @FXML
    public Button task1ReportBtn;

    @FXML
    public Button application1Run;

    @FXML
    private Tab tabTaskZero;

    @FXML
    private TextField textfieldNameF;

    @FXML
    private TextField textfieldYear;

    @FXML
    private Button buttonRankM;

    @FXML
    private TextField textfieldNameM;

    @FXML
    private Button buttonRankF;

    @FXML
    private Button buttonTopM;

    @FXML
    private Button buttonTopF;

    @FXML
    private Button buttonSummary;
    
    @FXML
    private Tab tabReport1;

    @FXML
    private TextField inputTopN;

    @FXML
    private RadioButton inputMale;

    @FXML
    private RadioButton inputFemale;

    @FXML
    private TextField inputStart;

    @FXML
    private TextField inputEnd;

    @FXML
    private TextField inputFatherName;

    @FXML
    private TextField inputMotherName;

    @FXML
    private TextField inputDadYOB;

    @FXML
    private TextField inputMumYOB;

    @FXML
    private TextField inputVintageYear;

    @FXML
    private ToggleGroup T1;

    @FXML
    private Tab tabReport2;

    @FXML
    private TextField task2NameField;

    @FXML
    private RadioButton task2Male;

    @FXML
    private ToggleGroup T11;

    @FXML
    private RadioButton task2Female;

    @FXML
    private TextField task2EndYear;

    @FXML
    private TextField task2StartYear;

    @FXML
    private Button NamePopularityQueryButton;

    @FXML
    private Tab tabReport3;

    @FXML
    private RadioButton task3_maleBtn;

    @FXML
    private RadioButton task3_femaleBtn;

    @FXML
    private ToggleGroup T111;

    @FXML
    private TextField task3_year1Field;

    @FXML
    private TextField task3_year2Field;

    @FXML
    private TextField task3_topNField;

    @FXML
    private Button task3_reportBtn;

    @FXML
    private Tab tabApp1;

    @FXML
    private Tab tabApp2;


    @FXML
    private TextField task5NameField;

    @FXML
    private TextField task5_YOB;

    @FXML
    private RadioButton task5_maleBtn;

    @FXML
    private ToggleGroup T51;

    @FXML
    private RadioButton task5_femaleBtn;

    @FXML
    private RadioButton task5_mateMaleBtn;

    @FXML
    private ToggleGroup T52;

    @FXML
    private RadioButton task5_mateFemaleBtn;

    @FXML
    private RadioButton task5_youngerBtn;

    @FXML
    private ToggleGroup T53;

    @FXML
    private RadioButton task5_olderBtn;

    @FXML
    private Button task5_predictBtn;

    @FXML
    private Tab tabApp3;

    @FXML
    private TextField task6_nameField;

    @FXML
    private RadioButton task6_maleBtn;

    @FXML
    private ToggleGroup T61;

    @FXML
    private RadioButton task6_femaleBtn;

    @FXML
    private TextField task6_yobField;

    @FXML
    private TextField task6_mateNameField;

    @FXML
    private RadioButton task6_mateMaleBtn;

    @FXML
    private ToggleGroup T62;

    @FXML
    private RadioButton task6_mateFemaleBtn;

    @FXML
    private RadioButton task6_youngerBtn;

    @FXML
    private ToggleGroup T63;

    @FXML
    private RadioButton task6_olderBtn;

    @FXML
    private Button task6_predictBtn;

    @FXML
    private TextArea textAreaConsole;
    

    /**
     *  Task Zero
     *  To be triggered by the &quot;Summary&quot; button on the Task Zero Tab 
     *  
     */
    @FXML
    void doSummary() {
<span class="nc" id="L225">    	int year = Integer.parseInt(textfieldYear.getText());</span>
<span class="nc" id="L226">    	String oReport = AnalyzeNames.getSummary(year);</span>
<span class="nc" id="L227">    	textAreaConsole.setText(oReport);</span>
<span class="nc" id="L228">    }</span>

  
    /**
     *  Task Zero
     *  To be triggered by the &quot;Rank (female)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doRankF() {
<span class="fc" id="L238">    	String oReport = &quot;&quot;;</span>
<span class="fc" id="L239">    	String iNameF = textfieldNameF.getText();</span>
<span class="fc" id="L240">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="fc" id="L241">    	int oRank = AnalyzeNames.getRank(iYear, iNameF, &quot;F&quot;);</span>
<span class="pc bpc" id="L242" title="1 of 2 branches missed.">    	if (oRank == -1)</span>
<span class="nc" id="L243">    		oReport = String.format(&quot;The name %s (female) has not been ranked in the year %d.\n&quot;, iNameF, iYear);</span>
    	else
<span class="fc" id="L245">    		oReport = String.format(&quot;Rank of %s (female) in year %d is #%d.\n&quot;, iNameF, iYear, oRank);</span>
<span class="fc" id="L246">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L247">    }</span>

  
    /**
     *  Task Zero
     *  To be triggered by the &quot;Rank (male)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doRankM() {
<span class="fc" id="L257">    	String oReport = &quot;&quot;;</span>
<span class="fc" id="L258">    	String iNameM = textfieldNameM.getText();</span>
<span class="fc" id="L259">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="fc" id="L260">    	int oRank = AnalyzeNames.getRank(iYear, iNameM, &quot;M&quot;);</span>
<span class="pc bpc" id="L261" title="1 of 2 branches missed.">    	if (oRank == -1)</span>
<span class="nc" id="L262">    		oReport = String.format(&quot;The name %s (male) has not been ranked in the year %d.\n&quot;, iNameM, iYear);</span>
    	else
<span class="fc" id="L264">    		oReport = String.format(&quot;Rank of %s (male) in year %d is #%d.\n&quot;, iNameM, iYear, oRank);</span>
<span class="fc" id="L265">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L266">    }</span>


    /**
     *  Task Zero
     *  To be triggered by the &quot;Top 5 (female)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doTopF() {
<span class="nc" id="L276">    	String oReport = &quot;&quot;;</span>
<span class="nc" id="L277">    	final int topN = 5;</span>
<span class="nc" id="L278">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="nc" id="L279">    	oReport = String.format(&quot;Top %d most popular names (female) in the year %d:\n&quot;, topN, iYear);</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">    	for (int i=1; i&lt;=topN; i++)</span>
<span class="nc" id="L281">    		oReport += String.format(&quot;#%d: %s\n&quot;, i, AnalyzeNames.getName(iYear, i, &quot;F&quot;));</span>
<span class="nc" id="L282">    	textAreaConsole.setText(oReport);</span>
<span class="nc" id="L283">    }</span>


    /**
     *  Task Zero
     *  To be triggered by the &quot;Top 5 (male)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doTopM() {
<span class="nc" id="L293">    	String oReport = &quot;&quot;;</span>
<span class="nc" id="L294">    	final int topN = 5;</span>
<span class="nc" id="L295">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="nc" id="L296">    	oReport = String.format(&quot;Top %d most popular names (male) in the year %d:\n&quot;, topN, iYear);</span>
<span class="nc bnc" id="L297" title="All 2 branches missed.">    	for (int i=1; i&lt;=topN; i++)</span>
<span class="nc" id="L298">    		oReport += String.format(&quot;#%d: %s\n&quot;, i, AnalyzeNames.getName(iYear, i, &quot;M&quot;));</span>
<span class="nc" id="L299">    	textAreaConsole.setText(oReport);</span>
<span class="nc" id="L300">    }</span>


    /**
     * Reporting 1 (Task 1) Get the top N most popular names at birth over a given period.
     *
     *  &lt;p&gt;
     *  To be triggered by the &quot;REPORT&quot; button on the Reporting 1 Tab.
     *  Perform input validation on user inputs on Reporting 1 tab,
     *  pop alert with reason if inputs are invalid.
     *
     *  Otherwise, pop out a table to show the top N most popular names over a given period,
     *  and provide a summary in the textAreaConsole.
     *  &lt;/p&gt;
     */
    @FXML
    void doReport(){
<span class="fc" id="L317">            textAreaConsole.setText(&quot;&quot;);</span>
<span class="fc" id="L318">            String oReport = &quot;&quot;;</span>
            String gender;
<span class="fc bfc" id="L320" title="All 2 branches covered.">            if(inputMale.isSelected()){</span>
<span class="fc" id="L321">                gender = &quot;M&quot;;</span>
            }else{
<span class="fc" id="L323">                gender = &quot;F&quot;;</span>
            }
            int topN, startYear, endYear;
            try{
<span class="fc" id="L327">                topN = Integer.parseInt(inputTopN.getText());</span>
<span class="fc" id="L328">                startYear = Integer.parseInt(inputStart.getText());</span>
<span class="fc" id="L329">                endYear = Integer.parseInt(inputEnd.getText());</span>

<span class="fc" id="L331">            }catch(NumberFormatException e){</span>
<span class="fc" id="L332">                popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Format of the input is invalid! Please enter a valid period&quot;);</span>
<span class="fc" id="L333">                return;</span>
<span class="fc" id="L334">            }</span>
<span class="pc bpc" id="L335" title="4 of 8 branches missed.">            if (startYear&lt;1880 || startYear&gt;2019 || endYear&lt;1880 || endYear&gt;2019) {</span>
<span class="nc" id="L336">                popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;The inputted Period is invalid! Please enter a period within the specified range&quot;);</span>
<span class="nc" id="L337">                return;</span>
            }

<span class="pc bpc" id="L340" title="1 of 2 branches missed.">            if (topN &lt; 1) {</span>
<span class="nc" id="L341">                popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;The range of the rank of names is invalid! Please enter a range larger or equal to 1&quot;);</span>
<span class="nc" id="L342">                return;</span>
             }

<span class="pc bpc" id="L345" title="1 of 2 branches missed.">            if (endYear &lt; startYear) {</span>
<span class="nc" id="L346">                popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Period to be Queried is invalid! End of period cannot be earlier than Start of period&quot;);</span>
<span class="nc" id="L347">                return;</span>
            }
<span class="fc" id="L349">            TopNamesQuery query = new TopNamesQuery(topN, gender, startYear,endYear);</span>
<span class="fc" id="L350">            query.getTopNames();</span>
            //query.getSummary();
<span class="fc" id="L352">            oReport = query.getSummary();</span>
<span class="fc" id="L353">            textAreaConsole.setText(oReport);</span>
<span class="fc" id="L354">            popTable(query.getTableView(), &quot;Top N names&quot;, null, oReport);</span>
<span class="fc" id="L355">    }</span>


    /**
     *  Reporting 2 (Task 2) Report the popularity of a particular name over a given period.
     *
     *  &lt;p&gt;
     *  To be triggered by the &quot;REPORT&quot; button on the Reporting 2 Tab.
     *  Perform input validation on user inputs on Reporting 2 tab,
     *  pop alert with reason if inputs are invalid.
     *
     *  Otherwise, pop out a table to show the popularity of a particular name over a given period,
     *  and provide a summary in the textAreaConsole.
     *  &lt;/p&gt;
     */
    @FXML
    void doNamePopularityQuery() {
<span class="fc" id="L372">        textAreaConsole.setText(&quot;&quot;);</span>
<span class="fc" id="L373">        String name = task2NameField.getText();</span>
<span class="fc bfc" id="L374" title="All 2 branches covered.">        if (name.isBlank()) {</span>
<span class="fc" id="L375">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Name is blank! Please enter a valid name!&quot;);</span>
<span class="fc" id="L376">            return;</span>
        }

<span class="fc" id="L379">        String gender = &quot;M&quot;;</span>
<span class="fc bfc" id="L380" title="All 2 branches covered.">        if (task2Female.isSelected()) {</span>
<span class="fc" id="L381">            gender = &quot;F&quot;;</span>
        }

        int  startYear;
        int endYear;
        try {
<span class="fc" id="L387">            startYear = Integer.parseInt(task2StartYear.getText());</span>
<span class="fc" id="L388">            endYear = Integer.parseInt(task2EndYear.getText());</span>
<span class="fc bfc" id="L389" title="All 8 branches covered.">            if (startYear&lt;1880 || startYear&gt;2019 || endYear&lt;1880 || endYear&gt;2019) {</span>
<span class="fc" id="L390">                throw new NumberFormatException();</span>
            }
<span class="fc" id="L392">        } catch (NumberFormatException e) {</span>
<span class="fc" id="L393">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;The queried period is invalid! Year inputs must be between 1880 and 2019!&quot;);</span>
<span class="fc" id="L394">            return;</span>
<span class="fc" id="L395">        }</span>
<span class="fc bfc" id="L396" title="All 2 branches covered.">        if (startYear &gt; endYear) {</span>
<span class="fc" id="L397">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Period to be queried is invalid! Start year must not be greater than end year!&quot;);</span>
<span class="fc" id="L398">            return;</span>
        }

<span class="fc" id="L401">        NamePopularityQuery query = new NamePopularityQuery(name, gender, startYear, endYear);</span>
<span class="fc" id="L402">        String summary = query.getSummary();</span>
<span class="fc" id="L403">        textAreaConsole.setText(summary);</span>
<span class="fc" id="L404">        popTable(query.getTableView(), &quot;Reporting 2&quot;, null, summary);</span>
<span class="fc" id="L405">    }</span>


    /**
     *  Reporting 3 (Task 3) Get trend of Top N names between two years
     *
     *  &lt;p&gt;
     *  To be triggered by the &quot;REPORT&quot; button on the Reporting 3 Tab.
     *  Perform input validation on user inputs on Reporting 3 tab,
     *  pop alert with reason if user inputs are invalid.
     *
     *  Otherwise, show a summary of the name trend and pop table with detailed data.
     *  &lt;/p&gt;
     */
    @FXML
    void doNameTrendQuery() {
<span class="fc" id="L421">        textAreaConsole.setText(&quot;&quot;);</span>
<span class="fc" id="L422">        String gender = &quot;M&quot;;</span>
<span class="fc bfc" id="L423" title="All 2 branches covered.">        if (task3_femaleBtn.isSelected()) {</span>
<span class="fc" id="L424">            gender = &quot;F&quot;;</span>
        }
        int startYear, endYear, N;
        try {
<span class="fc" id="L428">            startYear = Integer.parseInt(task3_year1Field.getText());</span>
<span class="fc" id="L429">            endYear = Integer.parseInt(task3_year2Field.getText());</span>
<span class="fc bfc" id="L430" title="All 8 branches covered.">            if (startYear &lt; 1880 || startYear &gt; 2019 || endYear &lt; 1880 || endYear &gt; 2019) {</span>
<span class="fc" id="L431">                throw new NumberFormatException();</span>
            }
<span class="fc" id="L433">        } catch (NumberFormatException e) {</span>
<span class="fc" id="L434">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Year must be between 1880 and 2019!&quot;);</span>
<span class="fc" id="L435">            return;</span>
<span class="fc" id="L436">        }</span>
<span class="fc bfc" id="L437" title="All 2 branches covered.">        if (startYear &gt; endYear) {</span>
<span class="fc" id="L438">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Start year must not be greater than end year!&quot;);</span>
<span class="fc" id="L439">            return;</span>
        }
        try {
<span class="fc" id="L442">            N = Integer.parseInt(task3_topNField.getText());</span>
<span class="fc bfc" id="L443" title="All 2 branches covered.">            if (N &lt; 1) {</span>
<span class="fc" id="L444">                throw new NumberFormatException();</span>
            }
<span class="fc" id="L446">        } catch (NumberFormatException e) {</span>
<span class="fc" id="L447">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Must query at least top 1!&quot;);</span>
<span class="fc" id="L448">            return;</span>
<span class="fc" id="L449">        }</span>
<span class="fc" id="L450">        NameTrendQuery query = new NameTrendQuery(gender, startYear, endYear, N);</span>
<span class="fc" id="L451">        String oReport = query.getSummary();</span>
<span class="fc" id="L452">        textAreaConsole.setText(oReport);</span>
<span class="fc" id="L453">        popTable(query.getTableView(), &quot;Reporting 3&quot;, null, oReport);</span>
<span class="fc" id="L454">    }</span>


    /**
     * Application 1 (Task 4) Get recommendations on names for newborn babies
     *
     * &lt;p&gt;
     * To be triggered by the &quot;Start Query&quot; button on the Application 1 Tab.
     * Perform input validation on user inputs on Application 1 tab,
     * pop alert with reason if user inputs are invalid.
     *
     * Otherwise, show recommended name for baby boy and recommended name for baby girl.
     * &lt;/p&gt;
     */
    @FXML
    void doBabyNameRecommendation(){
<span class="fc" id="L470">        textAreaConsole.setText(&quot;&quot;);</span>
<span class="fc" id="L471">        String dadName = inputFatherName.getText();</span>
<span class="fc" id="L472">        String mumName = inputMotherName.getText();</span>
<span class="fc bfc" id="L473" title="All 2 branches covered.">        if(dadName.isBlank()){</span>
<span class="fc" id="L474">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;The father's name cannot be blank!&quot;);</span>
<span class="fc" id="L475">            return;</span>
        }
<span class="fc bfc" id="L477" title="All 2 branches covered.">        if(mumName.isBlank()){</span>
<span class="fc" id="L478">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;The mother's name cannot be blank!&quot;);</span>
<span class="fc" id="L479">            return;</span>
        }
        int dadYOB, mumYOB, vintageYear;
        try{
<span class="fc" id="L483">            dadYOB = Integer.parseInt(inputDadYOB.getText());</span>
<span class="fc" id="L484">            mumYOB = Integer.parseInt(inputMumYOB.getText());</span>
<span class="pc bpc" id="L485" title="2 of 8 branches missed.">            if(dadYOB &lt; 1880 || dadYOB &gt; 2019 || mumYOB &lt; 1880 || mumYOB &gt; 2019){</span>
<span class="fc" id="L486">                throw new NumberFormatException();</span>
            }
<span class="fc" id="L488">        }catch(NumberFormatException e){</span>
<span class="fc" id="L489">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Invalid date for YOB!&quot;);</span>
<span class="fc" id="L490">            return;</span>
<span class="fc" id="L491">        }</span>
        try{
<span class="fc" id="L493">            vintageYear = Integer.parseInt(inputVintageYear.getText());</span>
<span class="fc" id="L494">        }catch(NumberFormatException e){</span>
<span class="fc" id="L495">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Invalid input for vintage year!&quot;);</span>
<span class="fc" id="L496">            return;</span>
<span class="fc" id="L497">        }</span>
<span class="pc bpc" id="L498" title="2 of 4 branches missed.">        if(vintageYear &lt; 1880 || vintageYear &gt; 2019){</span>
<span class="nc" id="L499">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Vintage year is out of range!&quot;);</span>
<span class="nc" id="L500">            return;</span>
        }
<span class="fc" id="L502">        BabyNameRecommendation recommendation = new BabyNameRecommendation(dadYOB, mumYOB, dadName, mumName, vintageYear);</span>
<span class="fc" id="L503">        textAreaConsole.setText(recommendation.getBabiesNames());</span>

<span class="fc" id="L505">    }</span>


    /**
     * Application 2 (Task 5) Predict name of a compatible pairs (soulmate name).
     *
     * &lt;p&gt;
     * To be triggered by the &quot;Get Prediction&quot; button on the Application 2 Tab.
     * Perform input validation on user inputs on Application 2 tab,
     * pop alert with reason if user inputs are invalid.
     *
     * Otherwise, show a name of a compatible pairs (soulmate) according to the inputs.
     * &lt;/p&gt;
     */
    @FXML
    void doSoulmateRecommendation() {
<span class="fc" id="L521">        textAreaConsole.setText(&quot;&quot;);</span>
<span class="fc" id="L522">        String username = task5NameField.getText();</span>
<span class="fc bfc" id="L523" title="All 2 branches covered.">        if (username.isBlank()) {</span>
<span class="fc" id="L524">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Name is blank! Please enter a valid name!&quot;);</span>
<span class="fc" id="L525">            return;</span>
        }

<span class="fc" id="L528">        String usergender = &quot;M&quot;;</span>
<span class="fc bfc" id="L529" title="All 2 branches covered.">        if (task5_femaleBtn.isSelected()) {</span>
<span class="fc" id="L530">            usergender = &quot;F&quot;;</span>
        }

        int userYOB;
        try {
<span class="fc" id="L535">            userYOB = Integer.parseInt(task5_YOB.getText());</span>
<span class="fc bfc" id="L536" title="All 4 branches covered.">            if (userYOB &lt; 1880 || userYOB &gt; 2019){</span>
<span class="fc" id="L537">                throw new NumberFormatException();</span>
            }
<span class="fc" id="L539">        } catch (NumberFormatException e) {</span>
<span class="fc" id="L540">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;,</span>
                    &quot;Year of Birth must be between 1880 and 2019!\n Sorry we cannot make any prediction on name of your compatible pairs(Soulmate)&quot;);
<span class="fc" id="L542">            return;</span>
<span class="fc" id="L543">        }</span>

<span class="fc" id="L545">        String mategender = &quot;M&quot;;</span>
<span class="fc bfc" id="L546" title="All 2 branches covered.">        if (task5_mateFemaleBtn.isSelected()) {</span>
<span class="fc" id="L547">            mategender = &quot;F&quot;;</span>
        }
<span class="fc" id="L549">        String mateAge = &quot;younger&quot;;</span>
<span class="fc bfc" id="L550" title="All 2 branches covered.">        if (task5_olderBtn.isSelected()) {</span>
<span class="fc" id="L551">            mateAge = &quot;older&quot;;</span>
        }

<span class="fc bfc" id="L554" title="All 4 branches covered.">        if (userYOB == 1880 &amp;&amp; mateAge.equals(&quot;younger&quot;)){</span>
<span class="fc" id="L555">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Unable to Make Prediction&quot;,</span>
                    &quot;There is no data on names of people younger than you!\nSorry we cannot make any prediction on name of your compatible pairs(Soulmate)&quot;);
<span class="fc" id="L557">            return;</span>
<span class="fc bfc" id="L558" title="All 4 branches covered.">        }else if (userYOB == 2019 &amp;&amp; mateAge.equals(&quot;older&quot;)){</span>
<span class="fc" id="L559">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Unable to Make Prediction&quot;,</span>
                    &quot;There is no data on names of people older than you!\nSorry we cannot make any prediction on name of your compatible pairs(Soulmate)&quot;);
<span class="fc" id="L561">            return;</span>
        }

<span class="fc" id="L564">        SoulmateNameRecommendation query = new SoulmateNameRecommendation(username, usergender, userYOB, mategender, mateAge);</span>
<span class="fc" id="L565">        String soulmateName = query.getSoulmateName();</span>
<span class="fc" id="L566">        String result = &quot;The result of name prediction for your compatible pairs (i.e. Soulmate) is the following: \n&quot;;</span>
<span class="fc" id="L567">        result += soulmateName;</span>
<span class="fc" id="L568">        textAreaConsole.setText(result);</span>
<span class="fc" id="L569">    }</span>


    /**
     * Application 3 (Task 6) Predict compatibility of a pair
     *
     * &lt;p&gt;
     * To be triggered by the &quot;PREDICT&quot; button on the Application 3 Tab.
     * Perform input validation on user inputs on Application 3 Tab,
     * pop alert with reason if user inputs are invalid.
     *
     * Otherwise, show the compatibility in percentage (correct to 2 d.p.).
     * &lt;/p&gt;
     */
    @FXML
    void doCompatibilityPrediction() {
<span class="fc" id="L585">        textAreaConsole.setText(&quot;&quot;);</span>
<span class="fc" id="L586">        String gender = &quot;M&quot;;</span>
<span class="fc bfc" id="L587" title="All 2 branches covered.">        if (task6_femaleBtn.isSelected()) {</span>
<span class="fc" id="L588">            gender = &quot;F&quot;;</span>
        }
<span class="fc" id="L590">        String mateGender = &quot;M&quot;;</span>
<span class="fc bfc" id="L591" title="All 2 branches covered.">        if (task6_mateFemaleBtn.isSelected()) {</span>
<span class="fc" id="L592">            mateGender = &quot;F&quot;;</span>
        }
        int yob;
        try {
<span class="fc" id="L596">            yob = Integer.parseInt(task6_yobField.getText());</span>
<span class="fc bfc" id="L597" title="All 4 branches covered.">            if (yob &lt; 1880 || yob &gt; 2019) {</span>
<span class="fc" id="L598">                throw new NumberFormatException();</span>
            }
<span class="fc" id="L600">        } catch (NumberFormatException e) {</span>
<span class="fc" id="L601">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Year of birth must be between 1880 and 2019!&quot;);</span>
<span class="fc" id="L602">            return;</span>
<span class="fc" id="L603">        }</span>
<span class="fc" id="L604">        int preference = -1;</span>
<span class="fc bfc" id="L605" title="All 2 branches covered.">        if (task6_olderBtn.isSelected()) {</span>
<span class="fc" id="L606">            preference = 1;</span>
        }
<span class="fc" id="L608">        int mateYob = yob + preference;</span>
<span class="fc bfc" id="L609" title="All 4 branches covered.">        if (mateYob &lt; 1880 || mateYob &gt; 2019) {</span>
<span class="fc" id="L610">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;There is no data for this age preference!&quot;);</span>
<span class="fc" id="L611">            return;</span>
        }
<span class="fc bfc" id="L613" title="All 4 branches covered.">        if (task6_nameField.getText().isBlank() || task6_mateNameField.getText().isBlank()) {</span>
<span class="fc" id="L614">            popAlert(AlertType.ERROR, &quot;Error&quot;, &quot;Invalid Input&quot;, &quot;Name must not be empty!&quot;);</span>
<span class="fc" id="L615">            return;</span>
        }
<span class="fc" id="L617">        CompatibilityPrediction query = new CompatibilityPrediction(task6_nameField.getText(), gender, yob</span>
<span class="fc" id="L618">                , task6_mateNameField.getText(), mateGender , preference);</span>
<span class="fc" id="L619">        double score = query.getPrediction();</span>
<span class="fc" id="L620">        textAreaConsole.setText(String.format(&quot;The compatibility is %.2f%%!&quot;, score));</span>
<span class="fc" id="L621">    }</span>


    /**
     * Common helper function for popping alert
     *
     * @param type      type of the alert
     * @param title     title of the alert
     * @param header    header of the alert
     * @param content   content of the alert
     */
    public static void popAlert(AlertType type, String title, String header, String content){
<span class="fc" id="L633">        Alert alert = new Alert(type);</span>
<span class="fc" id="L634">        alert.setTitle(title);</span>
<span class="fc" id="L635">        alert.setHeaderText(header);</span>
<span class="fc" id="L636">        alert.setContentText(content);</span>
<span class="fc" id="L637">        alert.showAndWait();</span>
<span class="fc" id="L638">    }</span>


    /**
     * Common helper function for popping table after query
     *
     * @param table     table representation of query data
     * @param title     title of dialog
     * @param header    header of dialog
     * @param content   content of dialog
     */
    public static void popTable(TableView&lt;?&gt; table, String title, String header, String content) {
<span class="fc" id="L650">        Alert dialog = new Alert(AlertType.INFORMATION);</span>
<span class="fc" id="L651">        dialog.setTitle(title);</span>
<span class="fc" id="L652">        dialog.setHeaderText(header);</span>
<span class="fc" id="L653">        dialog.setContentText(content);</span>
<span class="fc" id="L654">        dialog.getDialogPane().setExpandableContent(table);</span>
<span class="fc" id="L655">        dialog.getDialogPane().setExpanded(true);</span>
<span class="fc" id="L656">        dialog.showAndWait();</span>
<span class="fc" id="L657">    }</span>


}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>